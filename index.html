<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>HalloGenius!!! – Abenteuer Lernen!</title>
  <!-- Font Awesome für Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
  <style>
    /* ===== PALETA ===== */
    :root {
      --blue:     #0052CC;
      --amber:    #F2A738;
      --coral:    #D45A56;
      --sky:      #87CEFA;
      --grass:    #7FC97F;
      --white:    #FFFFFF;
      --text:     #222222;
      --shadow:   rgba(0,0,0,0.2);
      --anim-time: 4s;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(180deg, var(--sky) 0%, #FFF5CC 80%);
      color: var(--text);
      overflow-x: hidden;
    }
    /* ===== HEADER ===== */
    header {
      position: sticky; top: 0;
      display: flex; align-items: center; justify-content: space-between;
      background: linear-gradient(135deg, var(--blue), var(--coral));
      color: var(--white);
      padding: 1rem 2rem;
      box-shadow: 0 4px 12px var(--shadow);
      z-index: 100;
      overflow: hidden;
    }
    header::before {
      content: '';
      position: absolute; inset: 0;
      background: radial-gradient(circle at top left, rgba(255,255,255,0.15), transparent 60%);
      animation: glow 6s infinite alternate;
    }
    @keyframes glow {
      from { opacity: 0.3; }
      to   { opacity: 0.6; }
    }
    header .logo {
      display: flex; align-items: center; gap: .5rem;
      z-index: 1;
      animation: logoBounce 2s infinite;
    }
    @keyframes logoBounce {
      0%,100% { transform: translateY(0); }
      50% { transform: translateY(-6px); }
    }
    header .logo img { height: 40px; }
    header .logo span {
      font-size: 1.6rem; font-weight: 700;
      text-shadow: 1px 1px 4px var(--shadow);
    }
    nav {
      display: flex; align-items: center; gap: 1.2rem;
      z-index: 1;
    }
    nav a {
      position: relative;
      text-decoration: none;
      color: var(--white);
      font-weight: 600;
      padding: .5rem;
      transition: color .3s;
      cursor: pointer;
    }
    nav a::after {
      content: '';
      position: absolute; left: 0; bottom: -4px;
      width: 0; height: 3px;
      background: var(--amber);
      transition: width .3s;
    }
    nav a:hover {
      color: var(--amber);
    }
    nav a:hover::after {
      width: 100%;
    }
    /* ===== HEADER SHAPES ===== */
    .shape-circle {
      position: absolute;
      border-radius: 50%;
      background: rgba(255,255,255,0.2);
      animation: floatSlow 10s infinite;
    }
    .shape-circle.one { width: 80px; height: 80px; top: -20px; right: 100px; }
    .shape-circle.two { width: 50px; height: 50px; bottom: 10px; left: 150px; animation-delay: 2s; }
    @keyframes floatSlow {
      0% { transform: translateY(0); }
      50% { transform: translateY(10px); }
      100% { transform: translateY(0); }
    }
    /* ===== HERO ===== */
    .hero {
      position: relative;
      height: 60vh;
      display: flex; align-items: center; justify-content: center;
      text-align: center;
      overflow: hidden;
    }
    .hero::before {
      content: '';
      position: absolute; inset: 0;
      background: url('fondo.png') center/cover no-repeat;
      filter: brightness(0.8);
    }
    .cloud {
      position: absolute;
      background: url('https://svgshare.com/i/XnN.svg') no-repeat center/contain;
      width: 200px; height: 80px;
      opacity: .7;
      animation: float  var(--anim-time) ease-in-out infinite;
    }
    .cloud:nth-child(1) { top: 20%; left: -10%; animation-delay: 0s; }
    .cloud:nth-child(2) { top: 40%; left: -15%; animation-delay: 1.5s; width: 150px; height: 60px; }
    .cloud:nth-child(3) { top: 10%; left: 100%; animation-delay: 3s; }
    @keyframes float {
      0%   { transform: translateX(0) translateY(0); }
      50%  { transform: translateX(120vw) translateY(10px); }
      100% { transform: translateX(0) translateY(0); }
    }
    .hero-content {
      position: relative; z-index: 10;
      color: var(--white);
      max-width: 800px; padding: 0 1rem;
      animation: fadeInUp 1s ease-out both;
    }
    .hero-content h1 {
      font-size: 3rem; margin-bottom: .5rem;
      text-shadow: 2px 2px 10px var(--shadow);
    }
    .hero-content p {
      font-size: 1.2rem; opacity: .9;
      animation: fadeInUp 1s ease-out .3s both;
    }
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(20px); }
      to   { opacity: 1; transform: translateY(0); }
    }
    /* ===== MODULE CARDS ===== */
    main { padding: 4rem 1rem; max-width: 1200px; margin: 0 auto 4rem; }
    .modules { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px,1fr)); gap: 2.5rem; }
    .card {
      position: relative; background: var(--white);
      border-radius: 20px; padding: 2rem 1rem 3rem;
      box-shadow: 0 8px 24px var(--shadow); overflow: hidden;
      transition: transform .3s, box-shadow .3s; cursor:pointer;
    }
    .card:hover { transform: translateY(-8px) scale(1.02); box-shadow:0 12px 32px var(--shadow);}    
    .card::before,.card::after { content:''; position:absolute; border-radius:50%; opacity:.15; }
    .card::before { width:200px;height:200px;top:-50px;right:-50px;background:var(--blue);transform:rotate(45deg);}    
    .card::after  { width:150px;height:150px;bottom:-40px;left:-60px;background:var(--grass);}    
    .card.vocab { background: var(--blue); color: var(--white);}    
    .card.grammar{ background: var(--amber); color: var(--text);}    
    .card.test   { background: var(--coral); color: var(--white);}    
    .card.sim    { background: var(--blue); color: var(--white);}
    .card.lesen { background: var(--grass); color: var(--white);}
    .card.redemittel { background: var(--coral); color: var(--white);}
    .card.quiz { background: var(--amber); color: var(--text);}
    .card .icon  { font-size:3.5rem;margin-bottom:1rem;transition:transform .3s;}    
    .card:hover .icon { transform:rotate(20deg) scale(1.1);}    
    .card h3     { font-size:1.6rem;margin-bottom:.6rem;text-shadow:1px 1px 4px var(--shadow);}    
    .card p      { font-size:1rem;margin-bottom:1.5rem;line-height:1.5; }    
    .card .btn   { display:inline-flex;align-items:center;gap:.5rem;background:var(--grass);color:var(--text);padding:.6rem 1.2rem;border:none;border-radius:12px;font-weight:700;box-shadow:0 4px 12px var(--shadow);transition:transform .3s,background .3s;}    
    .card .btn:hover { transform:translateY(-2px);background:var(--coral);color:var(--white);}    
    .card .btn .fa-arrow-right { transition:transform .3s; }    
    .card .btn:hover .fa-arrow-right { transform:translateX(4px);}    

    /* ===== HIDDEN SECTIONS ===== */
    .contenido-oculto { display: none; padding: 2rem; max-width: 900px; margin: 0 auto; }
    .contenido-oculto h2 { margin-bottom: 1rem; color: var(--blue); }
    .back-btn {
      margin-top: 2rem;
      display: inline-block;
      padding: .6rem 1.2rem;
      background: var(--coral);
      color: var(--white);
      border-radius: 10px;
      cursor: pointer;
      text-decoration: none;
      font-weight: 600;
    }
    .back-btn:hover { background: var(--blue); }

    /* ===== FLASHCARDS ===== */
    .flashcard-container {
      display: flex; flex-wrap: wrap; gap: 1rem; justify-content: center;
    }
    .flashcard {
      background: var(--white); border: 2px solid var(--blue);
      border-radius: 10px; width: 120px; height: 120px;
      display: flex; align-items: center; justify-content: center;
      cursor: pointer; position: relative; 
      transition: transform .3s;
    }
    .flashcard:hover { transform: scale(1.05); }
    .flashcard .word {
      position: absolute; bottom: 10px;
      font-size: 0.9rem; font-weight: bold;
      color: var(--text);
      display: none;
    }
    .flashcard.show .word { display: block; }
    .flashcard i {
      font-size: 2.5rem; color: var(--blue);
    }
    /* ===== DRAG & DROP ===== */
    .dnd-container { display: flex; flex-direction: column; align-items: center; gap: 1rem; }
    .dnd-zone, .dnd-source {
      display: flex; gap: 0.5rem; padding: 1rem;
    }
    .dnd-zone { min-height: 40px; border: 2px dashed var(--blue); padding: 1rem; width: 100%; }
    .dnd-zone.empty { opacity: 0.3; }
    .dnd-source .dnd-item, .dnd-zone .dnd-item {
      background: var(--white); border: 2px solid var(--coral);
      padding: 0.5rem 1rem; border-radius: 8px;
      cursor: grab;
    }

    /* ===== QUIZ ===== */
    .quiz-question { margin-bottom: 1rem; }
    .quiz-question p { margin-bottom: 0.5rem; }
    .quiz-options { list-style: none; padding: 0; }
    .quiz-options li { margin: 0.5rem 0; }
    .quiz-options li label { cursor: pointer; }
    .btn-submit {
      margin-top: 1rem; padding: 0.5rem 1rem;
      background: var(--blue); color: var(--white);
      border: none; border-radius: 8px; font-weight: 600; cursor: pointer;
    }
    .btn-submit:hover { background: var(--coral); }
    /* ===== EXAM ===== */
    .exam-section { margin-bottom: 2rem; }
    .exam-section h3 { font-size: 1.2rem; margin-bottom: 0.5rem; }
    .result { font-size: 1.2rem; font-weight: bold; margin-top: 1rem; }
    .hidden { display: none; }
  </style>
</head>
<body>
  <header>
    <div class="shape-circle one"></div>
    <div class="shape-circle two"></div>
    <div class="logo">
      <img src="header.png" alt="🇩🇪" />
      <span>HalloGenios</span>
    </div>
    <nav>
      <a onclick="mostrarSeccion('home')">Startseite</a>
      <a onclick="mostrarSeccion('vokabeln')">Vokabeln</a>
      <a onclick="mostrarSeccion('grammatik')">Grammatik</a>
      <a onclick="mostrarSeccion('lesen')">Leseverstehen</a>
      <a onclick="mostrarSeccion('redemittel')">Redemittel</a>
      <a onclick="mostrarSeccion('quiz')">Quiz-Modus</a>
      <a onclick="mostrarSeccion('simulation')">Simulationsprüfung</a>
    </nav>
  </header>

  <!-- HOME -->
  <section id="home">
    <div class="hero">
      <div class="cloud"></div>
      <div class="cloud"></div>
      <div class="cloud"></div>
      <div class="hero-content">
        <h1>Herzlich willkommen auf unserer Webseite!</h1>
        <p>Diese Seite ist für Schüler gedacht, die sich spielerisch auf die A2-Prüfung in Deutsch vorbereiten möchten. Hier kannst du neues Vokabular mit Bildern lernen, dein Gedächtnis trainieren und mit Übungstests dein Wissen testen. Viel Spaß beim Lernen!</p>
      </div>
    </div>
    <main>
      <div class="modules">
        <div class="card vocab" onclick="mostrarSeccion('vokabeln')">
          <i class="fa-solid fa-language icon"></i>
          <h3>Vokabeln lernen</h3>
          <p>Entdecke neue Wörter mit bunten Bildern und Spielen.</p>
          <button class="btn">Los geht’s <i class="fa-solid fa-arrow-right"></i></button>
        </div>
        <div class="card grammar" onclick="mostrarSeccion('grammatik')">
          <i class="fa-solid fa-book-open icon"></i>
          <h3>Grammatik üben</h3>
          <p>Lerne Zeiten, Fälle und Präpositionen durch interaktive Rätsel.</p>
          <button class="btn">Los geht’s <i class="fa-solid fa-arrow-right"></i></button>
        </div>
        <div class="card lesen" onclick="mostrarSeccion('lesen')">
          <i class="fa-solid fa-book icon"></i>
          <h3>Leseverstehen</h3>
          <p>Verbessere dein Textverständnis mit Kurzgeschichten und Fragen.</p>
          <button class="btn">Los geht’s <i class="fa-solid fa-arrow-right"></i></button>
        </div>
        <div class="card redemittel" onclick="mostrarSeccion('redemittel')">
          <i class="fa-solid fa-comment-dots icon"></i>
          <h3>Redemittel</h3>
          <p>Lerne nützliche Ausdrücke für Alltag und Prüfungen.</p>
          <button class="btn">Los geht’s <i class="fa-solid fa-arrow-right"></i></button>
        </div>
        <div class="card quiz" onclick="mostrarSeccion('quiz')">
          <i class="fa-solid fa-gamepad icon"></i>
          <h3>Quiz-Modus</h3>
          <p>Teste dein Wissen spielerisch mit unterhaltsamen Quiz.</p>
          <button class="btn">Los geht’s <i class="fa-solid fa-arrow-right"></i></button>
        </div>
        <div class="card test" onclick="mostrarSeccion('simulation')">
          <i class="fa-solid fa-clipboard-list icon"></i>
          <h3>Simulationsprüfung</h3>
          <p>Erlebe das Prüfungsgefühl im realistischen Testmodus unter Zeitdruck.</p>
          <button class="btn">Los geht’s <i class="fa-solid fa-arrow-right"></i></button>
        </div>
      </div>
    </main>
  </section>

  <!-- VOCABULARY FLASHCARDS -->
  <section id="vokabeln" class="contenido-oculto">
    <h2>Vokabeln lernen</h2>
    <p>Lerne 200 wichtige Wörter mit unseren interaktiven Flashcards!</p>
    <div class="flashcard-container">
      <div class="flashcard" onclick="this.classList.toggle('show')">
        <i class="fa-solid fa-house"></i>
        <span class="word">das Haus</span>
      </div>
      <div class="flashcard" onclick="this.classList.toggle('show')">
        <i class="fa-solid fa-car"></i>
        <span class="word">das Auto</span>
      </div>
      <div class="flashcard" onclick="this.classList.toggle('show')">
        <i class="fa-solid fa-bus"></i>
        <span class="word">der Bus</span>
      </div>
      <div class="flashcard" onclick="this.classList.toggle('show')">
        <i class="fa-solid fa-shop"></i>
        <span class="word">der Supermarkt</span>
      </div>
      <div class="flashcard" onclick="this.classList.toggle('show')">
        <i class="fa-solid fa-utensils"></i>
        <span class="word">das Essen</span>
      </div>
      <div class="flashcard" onclick="this.classList.toggle('show')">
        <i class="fa-solid fa-film"></i>
        <span class="word">der Film</span>
      </div>
      <div class="flashcard" onclick="this.classList.toggle('show')">
        <i class="fa-solid fa-dog"></i>
        <span class="word">der Hund</span>
      </div>
      <div class="flashcard" onclick="this.classList.toggle('show')">
        <i class="fa-solid fa-book-open"></i>
        <span class="word">das Buch</span>
      </div>
    </div>
    <p>Tipp: Klicke auf eine Karte, um das Wort anzuzeigen oder zu verbergen.</p>
    <span class="back-btn" onclick="mostrarSeccion('home')">Zurück</span>
  </section>

<!-- GRAMMATIK ÜBEN (EXTENDIDO) -->
<section id="grammatik" class="contenido-oculto">
  <style>
    /* ===== Estilos locales para esta sección ===== */
    .hint {
      background: rgba(255,255,255,.8);
      border-left: 5px solid var(--blue);
      padding: .8rem 1rem; border-radius: 8px; margin: .6rem 0 1rem;
      font-size: .95rem;
    }
    .exo { margin: 1.2rem 0 2rem; }
    .exo h3 { display: flex; align-items: center; gap: .6rem; }
    .exo h3 i { opacity: .8; }

    /* DnD / Tap-to-build */
    .dnd-app { display:flex; flex-direction:column; gap: .75rem; }
    .dnd-status { display:flex; justify-content:space-between; align-items:center; gap:.5rem; font-size:.95rem; }
    .dnd-target, .dnd-source {
      display:flex; flex-wrap:wrap; gap:.5rem; padding: .8rem;
      min-height: 52px; border:2px dashed var(--blue); border-radius: 10px; background: rgba(255,255,255,.7);
    }
    .dnd-target { border-style: solid; }
    .chip {
      display:inline-flex; align-items:center; gap:.35rem;
      padding:.5rem .7rem; border-radius: 999px;
      background: var(--white); border:2px solid var(--coral);
      font-weight:600; cursor: pointer; user-select:none;
      transition: transform .12s ease-in-out;
    }
    .chip:active { transform: scale(.96); }
    .chip[draggable="true"] { cursor: grab; }
    .dnd-controls { display:flex; flex-wrap:wrap; gap:.6rem; }
    .btn-ghost {
      padding:.45rem .8rem; border-radius: 8px; border:2px solid var(--blue);
      background: transparent; font-weight:600; cursor:pointer;
    }
    .ok { color:#1a7f37; }
    .bad { color:#b1002e; }

    /* Multiple choice */
    .mc-card { background: rgba(255,255,255,.8); border-radius:12px; padding: .9rem; margin:.7rem 0; box-shadow:0 2px 8px var(--shadow); }
    .mc-q { margin-bottom:.4rem; }
    .mc-opts { list-style:none; padding:0; margin:0; }
    .mc-opts li { margin:.35rem 0; }
    .mc-controls { display:flex; align-items:center; gap:.8rem; flex-wrap:wrap; margin-top:.6rem; }

    /* Fill-in + Nube de palabras */
    .fill-item { background: rgba(255,255,255,.85); padding:.9rem; border-radius:12px; box-shadow:0 2px 8px var(--shadow); margin:.6rem 0; }
    .fill-item input {
      min-width: 120px; max-width: 160px; padding:.45rem .6rem; border-radius: 8px;
      border:2px solid var(--blue); outline:none; font-weight:700; text-align:center;
    }
    .word-bank { display:flex; flex-wrap:wrap; gap:.45rem; margin-top:.8rem; }
    .bank-chip { background:#fff; border:2px solid var(--grass); border-radius:999px; padding:.35rem .6rem; font-weight:700; cursor:pointer; }

    /* Modal de glosario */
    .modal { position: fixed; inset:0; display:flex; align-items:center; justify-content:center; background:rgba(0,0,0,.45); z-index:9999; }
    .modal.hidden { display:none; }
    .modal-content {
      background:#fff; border-radius:12px; padding:1rem 1.2rem; max-width: 420px; width: calc(100% - 2rem);
      box-shadow:0 10px 30px rgba(0,0,0,.25);
    }
    .modal-content h4 { margin-bottom:.4rem; color:var(--blue); }
    .modal-close { float:right; border:none; background:transparent; font-size:1.4rem; cursor:pointer; }

    /* Palabras difíciles (clic para ver significado) */
    .gloss { border-bottom: 2px dotted var(--coral); background: rgba(212,90,86,.08); border-radius:6px; padding:0 .2rem; cursor:pointer; }

    /* Móvil */
    @media (max-width: 600px){
      .dnd-target, .dnd-source { min-height: 64px; }
      .chip { padding:.6rem .8rem; }
      .fill-item input { min-width: 90px; max-width: 120px; }
    }
  </style>

  <h2>Gramática interactiva</h2>
  <p class="hint">
    👋 Bienvenido/a. Aquí reforzarás estructuras básicas de alemán (<strong>A1/A2</strong>) usando ejercicios cortos y visuales.
    Todo está pensado para celular, tablet y computador. Si <em>arrastrar y soltar</em> no funciona en tu móvil,
    simplemente <strong>toca</strong> las palabras para construir la frase. Las <span class="gloss" data-term="palabras difíciles">palabras difíciles</span>
    aparecen subrayadas: tócalas para ver su significado en español.
  </p>

  <!-- 1) DnD / Tap-to-build -->
  <article class="exo exo-dnd">
    <h3><i class="fa-solid fa-hand-pointer"></i> 1. Ordena la frase (Drag & Drop o toque)</h3>
    <p>Forma la oración en alemán a partir de las palabras desordenadas. Consejo: observa la posición del verbo y los elementos del tiempo/lugar.</p>

    <div id="dnd-app" class="dnd-app" aria-live="polite">
      <div class="dnd-status">
        <span id="dnd-progress">1 / 20</span>
        <div>
          <button id="dnd-reset" class="btn-ghost" type="button"><i class="fa-solid fa-rotate-left"></i> Reiniciar</button>
          <button id="dnd-solution" class="btn-ghost" type="button"><i class="fa-solid fa-lightbulb"></i> Ver solución</button>
        </div>
      </div>
      <div class="dnd-target" id="dnd-target" aria-label="Tu frase" role="list"></div>
      <div class="dnd-source" id="dnd-source" aria-label="Palabras disponibles" role="list"></div>
      <div class="dnd-controls">
        <button id="dnd-check" class="btn-submit" type="button">Comprobar</button>
        <button id="dnd-prev" class="btn-ghost" type="button">⟵ Anterior</button>
        <button id="dnd-next" class="btn-ghost" type="button">Siguiente ⟶</button>
      </div>
      <p id="dnd-feedback"></p>
    </div>
  </article>

  <!-- 2) Multiple choice -->
  <article class="exo exo-mc">
    <h3><i class="fa-solid fa-list-check"></i> 2. Opción múltiple (elige la forma correcta)</h3>
    <p>Selecciona la opción correcta para completar la frase. Enfócate en <strong>artículos</strong>, <strong>casos</strong> y <strong>formas verbales</strong>.</p>

    <div id="mc-app">
      <div id="mc-questions"></div>
      <div class="mc-controls">
        <button id="mc-check" class="btn-submit" type="button">Comprobar todo</button>
        <button id="mc-reset" class="btn-ghost" type="button">Reiniciar</button>
        <p id="mc-score" class="result"></p>
      </div>
    </div>
  </article>

  <!-- 3) Llenado de huecos + Nube de palabras -->
  <article class="exo exo-fill">
    <h3><i class="fa-solid fa-pen-to-square"></i> 3. Llenado de huecos (con banco de palabras)</h3>
    <p>Completa las oraciones con la opción correcta. Puedes escribir directamente o tocar una palabra del <strong>banco</strong> para insertarla.</p>
    <div id="fill-app">
      <div id="fill-questions"></div>
      <div>
        <h4 style="margin-top:.8rem;">Banco de palabras</h4>
        <div class="word-bank" id="word-bank"></div>
      </div>
      <div class="mc-controls">
        <button id="fill-check" class="btn-submit" type="button">Comprobar todo</button>
        <button id="fill-reset" class="btn-ghost" type="button">Reiniciar</button>
        <p id="fill-score" class="result"></p>
      </div>
    </div>
  </article>

  <span class="back-btn" onclick="mostrarSeccion('home')">Volver al inicio</span>

  <!-- Modal Glosario -->
  <div id="gloss-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="gloss-term" aria-describedby="gloss-def">
    <div class="modal-content">
      <button class="modal-close" id="gloss-close" aria-label="Cerrar">×</button>
      <h4 id="gloss-term">Término</h4>
      <p id="gloss-def">Definición en español.</p>
    </div>
  </div>

  <script>
  (function(){
    /* ======== Datos (Banco de ejercicios) ======== */
    const DND_ITEMS = [
      { parts:["ich","früh","auf","stehe"], answer:"Ich stehe früh auf." },
      { parts:["wir","mit dem Bus","zur Schule","fahren"], answer:"Wir fahren mit dem Bus zur Schule." },
      { parts:["meine Schwester","gern","liest","Bücher"], answer:"Meine Schwester liest gern Bücher." },
      { parts:["wann","triffst","du","Freunde"], answer:"Wann triffst du Freunde?" },
      { parts:["er","jeden Tag","kocht","das Abendessen"], answer:"Er kocht jeden Tag das Abendessen." },
      { parts:["spielen","die Kinder","im Park"], answer:"Die Kinder spielen im Park." },
      { parts:["ich","einkaufen","im Supermarkt","gehe"], answer:"Ich gehe im Supermarkt einkaufen." },
      { parts:["wir","heute Abend","bestellen","eine Pizza"], answer:"Wir bestellen heute Abend eine Pizza." },
      { parts:["wann","kommt","der Zug"], answer:"Wann kommt der Zug?" },
      { parts:["meine Eltern","im Krankenhaus","arbeiten","beide"], answer:"Meine Eltern arbeiten beide im Krankenhaus." },
      { parts:["wie lange","lernst","du","Deutsch"], answer:"Wie lange lernst du Deutsch?" },
      { parts:["sie","auf dem Land","wohnt"], answer:"Sie wohnt auf dem Land." },
      { parts:["wir","morgen","keine Schule","haben"], answer:"Wir haben morgen keine Schule." },
      { parts:["machst","du","nach dem Essen","die Hausaufgaben"], answer:"Machst du nach dem Essen die Hausaufgaben?" },
      { parts:["er","mit dem Fahrrad","zur Arbeit","fährt"], answer:"Er fährt mit dem Fahrrad zur Arbeit." },
      { parts:["die Lehrerin","erklärt","die Aufgabe","langsam"], answer:"Die Lehrerin erklärt die Aufgabe langsam." },
      { parts:["wen","besuchen","wir","am Sonntag"], answer:"Wen besuchen wir am Sonntag?" },
      { parts:["ich","ein Ticket","am Schalter","kaufe"], answer:"Ich kaufe ein Ticket am Schalter." },
      { parts:["die Bahn","heute","hat","Verspätung"], answer:"Die Bahn hat heute Verspätung." },
      { parts:["hörst","du","nach der Schule","Musik"], answer:"Hörst du nach der Schule Musik?" }
    ];

    const MC_ITEMS = [
      { q:"Ich ___ ein Buch.", opts:["lesen","lese","liest"], ans:1 },
      { q:"Wir ___ gestern keine Zeit.", opts:["hatten","hat","haben"], ans:0 },
      { q:"___ Bruder studiert in Berlin.", opts:["Mein","Meine","Meinen"], ans:0 },
      { q:"Ich fahre morgen ___ Bus zur Schule.", opts:["mit dem","mit den","mit der"], ans:0 },
      { q:"Sie ___ sehr müde.", opts:["ist","sind","seid"], ans:0 },
      { q:"Gestern ___ es sehr kalt.", opts:["war","ist","waren"], ans:0 },
      { q:"Ich nehme ___ Apfel.", opts:["der","den","dem"], ans:1 },
      { q:"Wir treffen ___ Freunde im Park.", opts:["unsere","unseren","unserem"], ans:0 },
      { q:"Er hat ___ Hausaufgaben gemacht.", opts:["sein","seine","seinen"], ans:1 },
      { q:"Ich gehe heute ___ Stadt.", opts:["in die","in der","in den"], ans:0 },
      { q:"Das ist die Tasche ___ Schwester.", opts:["meines","meiner","meinem"], ans:1 },
      { q:"Ich wohne seit zwei Jahren ___ Köln.", opts:["in","nach","zu"], ans:0 },
      { q:"Können Sie mir ___ helfen?", opts:["bitte","bittet","gebeten"], ans:0 },
      { q:"Er ___ gestern krank.", opts:["ist","war","hatte"], ans:1 },
      { q:"Ich habe heute keine ___.", opts:["Zeit","Zeite","Zeiten"], ans:0 },
      { q:"Wie spät ___ es?", opts:["sind","ist","war"], ans:1 },
      { q:"Wir warten ___ den Bus.", opts:["auf","an","mit"], ans:0 },
      { q:"Ich trinke lieber ___ Wasser als Cola.", opts:["ein","Ø","der"], ans:1 },
      { q:"Sie hat ___ neue Schuhe gekauft.", opts:["ein","eine","Ø"], ans:1 },
      { q:"Der Zug ___ um 7:30 Uhr ab.", opts:["fährt","fahrt","fuhr"], ans:0 }
    ];

    const FILL_ITEMS = [
      { q:"Ich ___ 12 Jahre alt.", ans:"bin" },
      { q:"Wir ___ am Samstag frei.", ans:"haben" },
      { q:"Gestern ___ ich krank.", ans:"war" },
      { q:"Meine Mutter ___ im Krankenhaus.", ans:"arbeitet" },
      { q:"Ich ___ jeden Morgen Kaffee.", ans:"trinke" },
      { q:"Er ___ mit dem Fahrrad zur Schule.", ans:"fährt" },
      { q:"Wir ___ die Großeltern am Sonntag.", ans:"besuchen" },
      { q:"Ich ___ kein Geld dabei.", ans:"habe" },
      { q:"Wo ___ du? In Köln.", ans:"wohnst" },
      { q:"Sie ___ sehr gut Deutsch.", ans:"spricht" },
      { q:"Im Sommer ___ wir oft im See.", ans:"baden" },
      { q:"Gestern ___ wir keine Hausaufgaben.", ans:"hatten" },
      { q:"Ich ___ heute früh auf.", ans:"stehe" },
      { q:"Sie ___ Brot und Milch.", ans:"kauft" },
      { q:"Wir ___ um 7 Uhr in der Schule.", ans:"sind" },
      { q:"Der Film ___ um 18:30 Uhr.", ans:"beginnt" },
      { q:"Ich ___ gern Fußball.", ans:"spiele" },
      { q:"Heute ___ es warm.", ans:"ist" },
      { q:"Entschuldigung, ich ___ eine Frage.", ans:"habe" },
      { q:"Meine Freunde ___ morgen nach Berlin.", ans:"fahren" }
    ];
    const WORD_BANK = [...new Set(FILL_ITEMS.map(x => x.ans))];

    /* ======== Glosario (palabras difíciles) ======== */
    const GLOSS = {
      "Verspätung":"demora, retraso (p.ej., del tren).",
      "Schalter":"ventanilla/taquilla (punto de atención para comprar tickets).",
      "beide":"ambos/ambas.",
      "wann":"¿cuándo?",
      "wie lange":"¿cuánto tiempo?",
      "bestellen":"pedir/ordenar (comida, producto).",
      "erklärt":"explica.",
      "Aufgabe":"tarea/ejercicio.",
      "besuchen":"visitar.",
      "beginnt":"empieza, comienza.",
      "wohnt":"vive (reside).",
      "fährt":"va/conduce (en vehículo).",
      "seit":"desde (hace).",
      "gebeten":"(participio de) pedir/rogar (no se usa aquí como opción correcta)."
    };

    /* ======== Utilidades ======== */
    const byId = id => document.getElementById(id);
    const norm = s => s.toLowerCase().replaceAll(/[.,!?¿¡]/g,'').trim();
    function shuffle(arr){ return arr.map(v=>[Math.random(),v]).sort((a,b)=>a[0]-b[0]).map(x=>x[1]); }

    /* ======== 1) DnD / Tap-to-build ======== */
    const dnd = {
      idx: 0,
      init(){
        this.target = byId('dnd-target');
        this.source = byId('dnd-source');
        this.progress = byId('dnd-progress');
        this.feedback = byId('dnd-feedback');
        byId('dnd-check').addEventListener('click', ()=>this.check());
        byId('dnd-prev').addEventListener('click', ()=>this.move(-1));
        byId('dnd-next').addEventListener('click', ()=>this.move(1));
        byId('dnd-reset').addEventListener('click', ()=>this.load(this.idx));
        byId('dnd-solution').addEventListener('click', ()=>this.showSolution());
        this.load(0);
      },
      move(delta){
        this.idx = (this.idx + delta + DND_ITEMS.length) % DND_ITEMS.length;
        this.load(this.idx);
      },
      makeChip(text){
        const btn = document.createElement('button');
        btn.className = 'chip';
        btn.type = 'button';
        btn.textContent = text;
        btn.setAttribute('draggable','true');
        btn.addEventListener('dragstart', e=> e.dataTransfer.setData('text/plain', text));
        // Tap-to-move
        btn.addEventListener('click', ()=>{
          if (btn.parentElement === this.source) {
            this.target.appendChild(btn);
          } else {
            this.source.appendChild(btn);
          }
        });
        // Glosario si aplica
        const t = text.trim();
        const key = Object.keys(GLOSS).find(k => k.toLowerCase() === t.toLowerCase());
        if (key){
          btn.classList.add('gloss');
          btn.addEventListener('click', (ev)=>{
            // Evitar que el movimiento tape el gloss: si Ctrl o Alt, solo gloss
            if (!ev.ctrlKey && !ev.altKey) showGloss(key); 
          }, {capture:true});
        }
        return btn;
      },
      setupDnDZones(){
        const onOver = e=>{ e.preventDefault(); };
        const onDropTo = (toEl) => (e)=>{
          e.preventDefault();
          const text = e.dataTransfer.getData('text/plain');
          // Buscar chip en source con ese texto (si hay repetidos, toma el primero visible)
          const chip = [...this.source.querySelectorAll('.chip')].find(c => c.textContent === text);
          if (chip) toEl.appendChild(chip);
        };
        this.target.addEventListener('dragover', onOver);
        this.source.addEventListener('dragover', onOver);
        this.target.addEventListener('drop', onDropTo(this.target));
        this.source.addEventListener('drop', onDropTo(this.source));
      },
      load(i){
        const item = DND_ITEMS[i];
        this.feedback.textContent = '';
        this.progress.textContent = (i+1) + ' / ' + DND_ITEMS.length;

        // limpiar
        this.target.innerHTML = '';
        this.source.innerHTML = '';

        // rellenar source con orden aleatorio
        const parts = shuffle(item.parts.slice());
        parts.forEach(p => this.source.appendChild(this.makeChip(p)));

        // Asegurar listeners DnD
        this.setupDnDZones();
      },
      currentSentence(){
        return [...this.target.querySelectorAll('.chip')].map(c=>c.textContent).join(' ');
      },
      check(){
        const item = DND_ITEMS[this.idx];
        const got = norm(this.currentSentence());
        const expected = norm(item.answer);
        if (!got) {
          this.feedback.textContent = 'Primero arma tu oración tocando/arrastrando las palabras.';
          this.feedback.className = 'bad';
          return;
        }
        if (got === expected){
          this.feedback.textContent = '¡Correcto! 🎉';
          this.feedback.className = 'ok';
        } else {
          this.feedback.textContent = 'Aún no. Revisa posición del verbo y complementos.';
          this.feedback.className = 'bad';
        }
      },
      showSolution(){
        const item = DND_ITEMS[this.idx];
        this.target.innerHTML = '';
        this.source.innerHTML = '';
        item.parts.forEach(p => this.target.appendChild(this.makeChip(p)));
        this.feedback.textContent = 'Solución mostrada.';
        this.feedback.className = 'ok';
      }
    };

    /* ======== 2) Multiple choice ======== */
    const mc = {
      init(){
        this.wrap = byId('mc-questions');
        this.score = byId('mc-score');
        byId('mc-check').addEventListener('click', ()=>this.checkAll());
        byId('mc-reset').addEventListener('click', ()=>this.render());
        this.render();
      },
      render(){
        this.score.textContent = '';
        this.wrap.innerHTML = '';
        MC_ITEMS.forEach((it, idx)=>{
          const card = document.createElement('div'); card.className='mc-card';
          const q = document.createElement('div'); q.className='mc-q';
          // Realzar palabras difíciles en el enunciado
          let qText = it.q;
          qText = qText
            .replace('seit', '<span class="gloss" data-term="seit">seit</span>');
          q.innerHTML = `<strong>${idx+1}.</strong> ${qText}`;
          const ul = document.createElement('ul'); ul.className='mc-opts';
          it.opts.forEach((opt,oIdx)=>{
            // marcar opciones con términos difíciles
            let showOpt = opt;
            if (GLOSS[opt]) showOpt = `<span class="gloss" data-term="${opt}">${opt}</span>`;
            const id = `mc_${idx}_${oIdx}`;
            const li = document.createElement('li');
            li.innerHTML = `
              <label for="${id}">
                <input type="radio" id="${id}" name="mc_${idx}" value="${oIdx}">
                ${String.fromCharCode(97+oIdx)}) ${showOpt}
              </label>`;
            ul.appendChild(li);
          });
          const feedback = document.createElement('p'); feedback.id = `mc_fb_${idx}`;
          card.appendChild(q); card.appendChild(ul); card.appendChild(feedback);
          this.wrap.appendChild(card);
        });
        // activar glosario en los spans añadidos
        this.wrap.querySelectorAll('.gloss').forEach(el=>{
          el.addEventListener('click', ()=> showGloss(el.dataset.term));
        });
      },
      checkAll(){
        let correct=0;
        MC_ITEMS.forEach((it, idx)=>{
          const chosen = document.querySelector(`input[name="mc_${idx}"]:checked`);
          const fb = byId(`mc_fb_${idx}`);
          if(!chosen){
            fb.textContent='Elige una opción.'; fb.className='bad';
            return;
          }
          if (parseInt(chosen.value,10) === it.ans){
            fb.textContent='¡Correcto!'; fb.className='ok'; correct++;
          } else {
            fb.textContent=`Incorrecto. Respuesta: ${String.fromCharCode(97+it.ans)}) ${it.opts[it.ans]}`; fb.className='bad';
          }
        });
        this.score.textContent = `Puntaje: ${correct} / ${MC_ITEMS.length}`;
      }
    };

    /* ======== 3) Fill-in + Banco de palabras ======== */
    const fill = {
      init(){
        this.wrap = byId('fill-questions');
        this.bank = byId('word-bank');
        this.score = byId('fill-score');
        byId('fill-check').addEventListener('click', ()=>this.checkAll());
        byId('fill-reset').addEventListener('click', ()=>this.render());
        this.render();
      },
      render(){
        this.score.textContent = '';
        this.wrap.innerHTML = '';
        // Render preguntas
        FILL_ITEMS.forEach((it, idx)=>{
          const box = document.createElement('div'); box.className='fill-item';
          // Resaltar palabras difíciles en el enunciado
          let qText = it.q
            .replace('fährt','<span class="gloss" data-term="fährt">fährt</span>')
            .replace('wo','<span class="gloss" data-term="wann">wo</span>') // nota: usamos gloss de 'wann' solo para ejemplo "interrogativos"
            .replace('beginnt','<span class="gloss" data-term="beginnt">beginnt</span>')
            .replace('wohne','<span class="gloss" data-term="wohnt">wohne</span>') // aproximación
            .replace('wohns','<span class="gloss" data-term="wohnt">wohns</span>');
          box.innerHTML = `
            <label for="fill_${idx}"><strong>${idx+1}.</strong> ${qText}</label>
            <div style="margin-top:.4rem;">
              <input inputmode="latin" autocomplete="off" autocapitalize="off" spellcheck="false" id="fill_${idx}" placeholder="Escribe o toca del banco →">
              <span id="fill_fb_${idx}"></span>
            </div>
          `;
          this.wrap.appendChild(box);
        });
        // Glosario en enunciados
        this.wrap.querySelectorAll('.gloss').forEach(el=>{
          el.addEventListener('click', ()=> showGloss(el.dataset.term));
        });
        // Banco de palabras
        this.bank.innerHTML = '';
        WORD_BANK.forEach(w=>{
          const chip = document.createElement('button');
          chip.type='button'; chip.className='bank-chip'; chip.textContent = w;
          chip.addEventListener('click', ()=>{
            // insertar en input enfocado o el primero vacío
            const focused = document.activeElement && document.activeElement.tagName==='INPUT' && document.activeElement.id.startsWith('fill_')
              ? document.activeElement
              : [...this.wrap.querySelectorAll('input')].find(i=>!i.value);
            if (focused) {
              focused.value = w;
              focused.focus();
            }
          });
          this.bank.appendChild(chip);
        });
      },
      checkAll(){
        let correct=0;
        FILL_ITEMS.forEach((it, idx)=>{
          const input = byId(`fill_${idx}`);
          const fb = byId(`fill_fb_${idx}`);
          const val = (input.value || '').trim().toLowerCase();
          if (!val){ fb.textContent=' ⚠️'; fb.className='bad'; fb.style.marginLeft='.4rem'; return; }
          if (val === it.ans.toLowerCase()){
            fb.textContent=' ✔'; fb.className='ok'; fb.style.marginLeft='.4rem'; correct++;
          } else {
            fb.textContent=` ✖ (${it.ans})`; fb.className='bad'; fb.style.marginLeft='.4rem';
          }
        });
        this.score.textContent = `Puntaje: ${correct} / ${FILL_ITEMS.length}`;
      }
    };

    /* ======== Modal glosario ======== */
    const modal = byId('gloss-modal'), termEl = byId('gloss-term'), defEl = byId('gloss-def');
    byId('gloss-close').addEventListener('click', ()=> modal.classList.add('hidden'));
    function showGloss(term){
      const key = Object.keys(GLOSS).find(k => k.toLowerCase() === term.toLowerCase());
      termEl.textContent = key || term;
      defEl.textContent = GLOSS[key] || 'Sin definición registrada.';
      modal.classList.remove('hidden');
    }

    /* ======== Inicializar cuando el DOM esté listo ======== */
    function initAll(){
      // Activar glosario en el texto introductorio
      document.querySelectorAll('#grammatik .gloss').forEach(el=>{
        if (el.dataset.term) el.addEventListener('click', ()=> showGloss(el.dataset.term));
      });
      dnd.init(); mc.init(); fill.init();
    }
    if (document.readyState !== 'loading') initAll();
    else document.addEventListener('DOMContentLoaded', initAll);
  })();
  </script>
</section>


  <!-- LESEVERSTEHEN -->
  <section id="lesen" class="contenido-oculto">
    <h2>Lesen und Verstehen</h2>
    <p>Übe dein Textverständnis mit kurzen Nachrichten und Bildern.</p>

    <h3>Mini-Text</h3>
    <p><em>Liebe Anna, kommst du morgen zum Fußballtraining?</em></p>
    <p>Um was geht es in dieser Nachricht?</p>
    <ul>
      <li><input type="radio" name="lesen1" value="a"> a) Einladung zum Fußballtraining</li>
      <li><input type="radio" name="lesen1" value="b"> b) Frage nach dem Fußballtraining</li>
      <li><input type="radio" name="lesen1" value="c"> c) Grüße aus dem Fußballtraining</li>
    </ul>
    <button class="btn-submit" onclick="checkMC('lesen1', 'b', 'lesen1-result')">Überprüfen</button>
    <p id="lesen1-result"></p>

    <h3>Bilder + Text</h3>
    <p><i class="fa-solid fa-ticket"></i> Der Kinofilm "Abenteuer im Wald" beginnt um 18:30 Uhr.</p>
    <p>Frage: Wann beginnt der Film?</p>
    <button class="btn-submit" onclick="alert('18:30 Uhr')">Antwort anzeigen</button>

    <h3>Wahr/Falsch</h3>
    <p>"Das Abenteuer im Wald ist ein Kinofilm."</p>
    <ul>
      <li><input type="radio" name="vf1" value="true"> Wahr</li>
      <li><input type="radio" name="vf1" value="false"> Falsch</li>
    </ul>
    <button class="btn-submit" onclick="checkTrueFalse('vf1', true, 'vf1-result')">Überprüfen</button>
    <p id="vf1-result"></p>

    <span class="back-btn" onclick="mostrarSeccion('home')">Zurück</span>
  </section>

  <!-- REDEMITTEL -->
  <section id="redemittel" class="contenido-oculto">
    <h2>Redemittel üben</h2>
    <p>Lerne nützliche Sätze für den Alltag und Prüfungssituationen.</p>

    <h3>Flashcards</h3>
    <div class="flashcard-container">
      <div class="flashcard" onclick="this.classList.toggle('show')">
        <i class="fa-solid fa-school"></i>
        <span class="word">In der Schule: Ich habe meine Hausaufgaben nicht gemacht.</span>
      </div>
      <div class="flashcard" onclick="this.classList.toggle('show')">
        <i class="fa-solid fa-store"></i>
        <span class="word">Im Supermarkt: Kann ich mit Karte zahlen?</span>
      </div>
      <div class="flashcard" onclick="this.classList.toggle('show')">
        <i class="fa-solid fa-bus"></i>
        <span class="word">An der Bushaltestelle: Fährt dieser Bus nach Berlin?</span>
      </div>
    </div>
    <p>Tipp: Klicke auf die Karten, um die Redemittel zu sehen.</p>

    <h3>Dialog ergänzen</h3>
    <p>A: "Guten Tag! Wie kann ich Ihnen helfen?"</p>
    <p>B: "_____"</p>
    <ul>
      <li><input type="radio" name="dlg1" value="a"> a) Mir geht es gut.</li>
      <li><input type="radio" name="dlg1" value="b"> b) Ich habe zwei Tickets bestellt.</li>
      <li><input type="radio" name="dlg1" value="c"> c) Ich möchte bezahlen.</li>
    </ul>
    <button class="btn-submit" onclick="checkMC('dlg1', 'c', 'dlg1-result')">Überprüfen</button>
    <p id="dlg1-result"></p>

    <span class="back-btn" onclick="mostrarSeccion('home')">Zurück</span>
  </section>

  <!-- QUIZ-MODUS -->
  <section id="quiz" class="contenido-oculto">
    <h2>Quiz-Modus</h2>
    <p>Teste dein Wissen schnell und spielerisch!</p>

    <div id="quiz-content">
      <div class="quiz-question">
        <p>1. Wie heißt "Katze" auf Deutsch?</p>
        <ul class="quiz-options">
          <li><label><input type="radio" name="quizQ1" value="a"> a) der Hund</label></li>
          <li><label><input type="radio" name="quizQ1" value="b"> b) die Katze</label></li>
          <li><label><input type="radio" name="quizQ1" value="c"> c) die Maus</label></li>
        </ul>
      </div>
      <div class="quiz-question">
        <p>2. "Ich gehe ___ Schule."</p>
        <ul class="quiz-options">
          <li><label><input type="radio" name="quizQ2" value="a"> a) in der</label></li>
          <li><label><input type="radio" name="quizQ2" value="b"> b) zur</label></li>
          <li><label><input type="radio" name="quizQ2" value="c"> c) zum</label></li>
        </ul>
      </div>
      <div class="quiz-question">
        <p>3. "Heute ist Samstag." - Wahr oder Falsch?</p>
        <ul class="quiz-options">
          <li><label><input type="radio" name="quizQ3" value="true"> Wahr</label></li>
          <li><label><input type="radio" name="quizQ3" value="false"> Falsch</label></li>
        </ul>
      </div>
      <button class="btn-submit" onclick="checkQuizAnswers()">Ergebnisse anzeigen</button>
      <p id="quiz-result" class="result"></p>
    </div>

    <span class="back-btn" onclick="mostrarSeccion('home')">Zurück</span>
  </section>

  <!-- SIMULATIONSFÜHRUNG EXAMEN -->
  <section id="simulation" class="contenido-oculto">
    <h2>Simulationsprüfung</h2>
    <p>Absolviere einen vollständigen A2-Test!</p>

    <div class="exam-section" id="exam-vocab">
      <h3>1. Wortschatz: Welche Übersetzung passt zum Bild?</h3>
      <i class="fa-solid fa-car"></i> <span>das Auto</span><br>
      <input type="radio" name="exam1" value="richtig"> Richtig<br>
      <input type="radio" name="exam1" value="falsch"> Falsch
    </div>

    <div class="exam-section" id="exam-grammar">
      <h3>2. Grammatik: Ergänze den Satz:</h3>
      <p>Er ___ jeden Tag zur Schule. (geht)</p>
      <input type="text" id="exam2" placeholder="Antwort">
    </div>

    <div class="exam-section" id="exam-reading">
      <h3>3. Leseverstehen: Kurznachricht lesen</h3>
      <p>Max: Hallo! Kommen deine Eltern heute zu Besuch?</p>
      <p>Sophie: Ja, sie kommen um 18 Uhr. Ich muss aber noch Hausaufgaben machen.</p>
      <p>Frage: Wann kommen Sophies Eltern?</p>
      <input type="text" id="exam3" placeholder="Antwort">
    </div>

    <div class="exam-section" id="exam-expressions">
      <h3>4. Redemittel: Fülle ein Gesprächsthema ein</h3>
      <p>A: "Entschuldigung, ...?"</p>
      <input type="text" id="exam4" placeholder="Ihre Frage (z.B. Wie spät ist es)">
    </div>

    <button class="btn-submit" onclick="submitExam()">Prüfung abschließen</button>
    <p id="exam-result" class="result"></p>

    <span class="back-btn" onclick="mostrarSeccion('home')">Zurück</span>
  </section>

  <script>
    function mostrarSeccion(id) {
      document.querySelectorAll("section").forEach(sec => sec.style.display = "none");
      document.getElementById(id).style.display = "block";
      window.scrollTo({ top: 0, behavior: "smooth" });
    }

    // Drag and Drop für Grammatik
    const items = document.querySelectorAll('.dnd-item');
    items.forEach(item => {
      item.addEventListener('dragstart', dragStart);
    });
    const zones = document.querySelectorAll('.dnd-zone');
    zones.forEach(zone => {
      zone.addEventListener('dragover', allowDrop);
      zone.addEventListener('drop', drop);
    });
    function dragStart(event) {
      event.dataTransfer.setData("text", event.target.innerText);
    }
    function allowDrop(event) {
      event.preventDefault();
    }
    function drop(event) {
      event.preventDefault();
      const word = event.dataTransfer.getData("text");
      if (event.target.classList.contains('dnd-zone') && event.target.childElementCount === 0) {
        const item = document.createElement('div');
        item.className = 'dnd-item';
        item.innerText = word;
        event.target.appendChild(item);
        // Remove word from source
        items.forEach(i => {
          if (i.innerText === word) i.style.visibility = 'hidden';
        });
      }
    }
    function checkSentence() {
      const words = [];
      zones.forEach(zone => {
        if (zone.firstChild) words.push(zone.firstChild.textContent);
      });
      const resultElem = document.getElementById('dnd-result');
      if (words.join(' ') === 'ich spiele Fußball') {
        resultElem.textContent = 'Richtig! Gut gemacht!';
        resultElem.style.color = 'green';
      } else {
        resultElem.textContent = 'Falsch. Versuche es noch einmal!';
        resultElem.style.color = 'red';
      }
    }

    function checkMC(name, correctValue, resultId) {
      const options = document.getElementsByName(name);
      let selected;
      options.forEach(opt => { if (opt.checked) selected = opt.value; });
      const resultElem = document.getElementById(resultId);
      if (!selected) {
        resultElem.textContent = 'Bitte wähle eine Antwort.';
        resultElem.style.color = 'orange';
      } else if (selected === correctValue) {
        resultElem.textContent = 'Richtig!';
        resultElem.style.color = 'green';
      } else {
        resultElem.textContent = 'Falsch.';
        resultElem.style.color = 'red';
      }
    }
    function checkFill(inputId, answer, resultId) {
      const val = document.getElementById(inputId).value.trim().toLowerCase();
      const resultElem = document.getElementById(resultId);
      if (!val) {
        resultElem.textContent = 'Bitte einen Wert eingeben.';
        resultElem.style.color = 'orange';
      } else if (val === answer) {
        resultElem.textContent = 'Richtig!';
        resultElem.style.color = 'green';
      } else {
        resultElem.textContent = 'Falsch.';
        resultElem.style.color = 'red';
      }
    }
    function checkTrueFalse(name, correctBool, resultId) {
      const options = document.getElementsByName(name);
      let selected;
      options.forEach(opt => { if (opt.checked) selected = opt.value; });
      const resultElem = document.getElementById(resultId);
      if (!selected) {
        resultElem.textContent = 'Bitte wähle aus.';
        resultElem.style.color = 'orange';
      } else if ((selected === 'true') === correctBool) {
        resultElem.textContent = 'Wahr!';
        resultElem.style.color = 'green';
      } else {
        resultElem.textContent = 'Falsch.';
        resultElem.style.color = 'red';
      }
    }

    function checkQuizAnswers() {
      let score = 0;
      const q1 = document.querySelector('input[name="quizQ1"]:checked');
      const q2 = document.querySelector('input[name="quizQ2"]:checked');
      const q3 = document.querySelector('input[name="quizQ3"]:checked');
      if(q1 && q1.value === 'b') score++;
      if(q2 && q2.value === 'b') score++;
      if(q3 && q3.value === 'false') score++;
      const resultElem = document.getElementById('quiz-result');
      resultElem.textContent = 'Du hast ' + score + ' von 3 Punkten erreicht.';
    }

    // Simulationsprüfung
    function submitExam() {
      let total = 0, correct = 0;
      const exam1 = document.querySelector('input[name="exam1"]:checked');
      if (exam1 && exam1.value === 'richtig') correct++;
      total++;
      const exam2 = document.getElementById('exam2').value.trim().toLowerCase();
      if (exam2 === 'geht') correct++;
      total++;
      const exam3 = document.getElementById('exam3').value.trim();
      if (exam3 === '18 Uhr' || exam3 === '18 Uhr.') correct++;
      total++;
      const exam4 = document.getElementById('exam4').value.toLowerCase();
      if (exam4.includes('wie spät')) correct++;
      total++;
      const resultElem = document.getElementById('exam-result');
      resultElem.textContent = 'Dein Ergebnis: ' + correct + ' von ' + total + ' richtig.';
      const history = JSON.parse(localStorage.getItem('examhistory') || '[]');
      history.push({score: correct + '/' + total, date: new Date().toLocaleString()});
      localStorage.setItem('examhistory', JSON.stringify(history));
    }

    // Initial load
    mostrarSeccion('home');
  </script>
</body>
</html>

